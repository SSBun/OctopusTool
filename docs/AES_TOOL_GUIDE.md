# AES 加密/解密工具 - 使用指南

## 功能概览

专业的 AES（Advanced Encryption Standard）加密解密工具，提供企业级的加密功能和完整的配置选项。

## 核心功能

### 1. 字符编码支持
- **UTF-8**: 标准 Unicode 编码，支持多语言
- **Latin1**: 拉丁字符编码
- **Hex**: 十六进制编码
- **Base64**: Base64 编码

### 2. 加密模式
| 模式 | 说明 | 安全性 | IV 需求 | 特点 |
|------|------|--------|---------|------|
| **CBC** | Cipher Block Chaining | ⭐⭐⭐⭐⭐ | ✅ 需要 | 最常用，每个块依赖前一个块 |
| **ECB** | Electronic Codebook | ⭐⭐ | ❌ 不需要 | 最简单但不安全，不推荐 |
| **CFB** | Cipher Feedback | ⭐⭐⭐⭐ | ✅ 需要 | 流密码模式 |
| **OFB** | Output Feedback | ⭐⭐⭐⭐ | ✅ 需要 | 流密码模式 |
| **CTR** | Counter | ⭐⭐⭐⭐⭐ | ✅ 需要 | 计数器模式，可并行处理 |

### 3. 填充方式
- **PKCS7**: 最常用的填充方式（推荐）
- **NoPadding**: 无填充（需要确保数据长度是块大小的整数倍）
- **ZeroPadding**: 零填充
- **Iso10126**: ISO 10126 填充
- **Iso97971**: ISO 9797-1 填充
- **AnsiX923**: ANSI X9.23 填充

### 4. 密钥长度选项
- **128 bits** (16 字节): 平衡的安全性和性能
- **192 bits** (24 字节): 更高的安全性
- **256 bits** (32 字节): 最高安全级别

### 5. 密钥和 IV 管理
- **密钥 (KEY)**: 
  - 自动处理密钥长度
  - 不足时自动填充
  - 过长时自动截断
  - 实时显示当前密钥长度

- **初始化向量 (IV)**:
  - 固定长度 16 字节（128 位）
  - ECB 模式不需要 IV
  - 自动提示 IV 的必要性
  - 自动处理 IV 长度

## 使用步骤

### 加密流程
1. **选择配置**
   - 选择字符编码（默认 UTF-8）
   - 选择加密模式（推荐 CBC 或 CTR）
   - 选择填充方式（推荐 PKCS7）
   - 选择密钥长度（推荐 256 bits）

2. **输入密钥和 IV**
   - 在"密钥 (KEY)"字段输入密钥
   - 在"初始化向量 (IV)"字段输入 IV（如果需要）
   - 系统会显示当前长度和所需长度

3. **输入内容**
   - 在左侧"输入内容"区域输入要加密的文本
   - 实时显示字符数

4. **执行加密**
   - 点击"加密"按钮
   - 查看右侧"输出结果"区域的加密文本
   - 可以点击"复制结果"复制到剪贴板

### 解密流程
1. **使用相同配置**
   - 必须使用加密时相同的配置
   - 相同的加密模式
   - 相同的填充方式
   - 相同的密钥长度

2. **输入密钥和 IV**
   - 输入与加密时相同的密钥
   - 输入与加密时相同的 IV

3. **输入密文**
   - 在左侧"输入内容"区域输入加密后的文本

4. **执行解密**
   - 点击"解密"按钮
   - 查看右侧"输出结果"区域的原始文本

## 特色功能

### 1. 智能提示
- ⚠️ ECB 模式安全性警告
- 实时显示密钥和 IV 长度
- 详细的错误提示信息
- 配置项说明和建议

### 2. 便捷操作
- **加载示例**: 快速体验工具功能
- **交换输入输出**: 方便进行多次加密/解密
- **复制结果**: 一键复制到剪贴板
- **清空**: 快速清空所有输入

### 3. 响应式设计
- 桌面端：双列布局，左右对照
- 移动端：单列布局，适配小屏幕
- 实时反馈和错误提示

## 安全建议

### ✅ 推荐做法
1. **使用 CBC 或 CTR 模式**: 这些模式提供更好的安全性
2. **使用 256 位密钥**: 提供最高级别的安全保护
3. **使用随机 IV**: 每次加密使用不同的随机 IV
4. **使用 PKCS7 填充**: 标准且安全的填充方式
5. **妥善保管密钥**: 不要在代码中硬编码密钥

### ❌ 不推荐做法
1. **避免使用 ECB 模式**: 相同的明文会产生相同的密文，不安全
2. **不要使用弱密钥**: 避免使用简单或短密钥
3. **不要重用 IV**: 每次加密应使用新的随机 IV
4. **不要忽略错误**: 解密失败可能表示密钥或配置错误

## 技术实现

### 依赖库
- **crypto-js**: 专业的 JavaScript 加密库
- 支持完整的 AES 标准
- 跨浏览器兼容
- 经过充分测试

### 密钥和 IV 处理
```typescript
// 密钥处理逻辑
- 自动填充不足的密钥长度
- 自动截断过长的密钥
- 确保密钥长度符合选择的密钥大小

// IV 处理逻辑
- 固定为 16 字节（AES 块大小）
- ECB 模式自动忽略 IV
- 自动处理 IV 长度
```

### 加密/解密流程
```typescript
// 加密
1. 验证输入和密钥
2. 处理密钥和 IV 到正确长度
3. 使用 crypto-js 执行 AES 加密
4. 返回 Base64 编码的密文

// 解密
1. 验证密文和密钥
2. 处理密钥和 IV 到正确长度
3. 使用 crypto-js 执行 AES 解密
4. 返回 UTF-8 编码的明文
```

## 常见问题

### Q: 加密后的文本是什么格式？
A: 默认输出 Base64 编码的字符串，便于传输和存储。

### Q: 为什么解密失败？
A: 常见原因：
- 密钥或 IV 不正确
- 加密模式或填充方式不匹配
- 密钥长度设置不一致
- 输入的密文格式错误

### Q: ECB 模式为什么会有警告？
A: ECB 模式对相同的明文块会产生相同的密文块，容易泄露信息模式，不够安全。

### Q: 密钥长度不够怎么办？
A: 工具会自动用零填充到所需长度，但建议使用完整长度的强密钥。

### Q: 可以用于生产环境吗？
A: 本工具使用专业的 crypto-js 库，加密算法本身是安全的，但：
- 不要在前端存储或硬编码敏感密钥
- 敏感数据加密应在后端进行
- 确保使用 HTTPS 传输加密数据

## 示例

### 示例 1: 标准 CBC 加密
```
配置:
- 字符编码: UTF-8
- 加密模式: CBC
- 填充方式: PKCS7
- 密钥长度: 128 bits

密钥: mySecretKey123456
IV: myInitVector1234
明文: Hello, World! 你好世界！

步骤:
1. 点击"加载示例"按钮
2. 点击"加密"按钮
3. 查看加密结果
4. 点击"解密"按钮验证
```

### 示例 2: 高安全性配置
```
配置:
- 字符编码: UTF-8
- 加密模式: CTR
- 填充方式: PKCS7
- 密钥长度: 256 bits

密钥: ThisIsAVeryLongAndSecureKey1234567890
IV: RandomVector12345
```

## 更新日志

### v2.0.0 (当前版本)
- ✨ 全新专业界面设计
- ✨ 支持 5 种加密模式
- ✨ 支持 6 种填充方式
- ✨ 支持 3 种密钥长度
- ✨ 智能密钥和 IV 处理
- ✨ 实时长度提示
- ✨ 安全性警告和建议
- ✨ 交换输入输出功能
- ✨ 详细使用说明
- 🔧 使用 crypto-js 替代简单 XOR

### v1.0.0
- 基础 XOR 加密演示版本

## 总结

这是一个功能完整、专业级的 AES 加密解密工具，适合：
- 🎓 学习和理解 AES 加密原理
- 🧪 测试和验证加密结果
- 🔧 开发过程中的快速加密/解密
- 📚 作为加密配置的参考工具

**记住**：加密是数据安全的重要组成部分，但正确使用同样重要。遵循安全最佳实践，妥善保管密钥！

