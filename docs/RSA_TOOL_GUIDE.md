# RSA 加密/解密工具 - 使用指南

## 功能概览

专业的 RSA（Rivest-Shamir-Adleman）非对称加密工具，提供密钥生成、公钥加密、私钥解密等完整功能。

## 核心功能

### 1. 密钥管理
- **密钥生成**: 支持 1024、2048、4096 位密钥
- **PEM 格式**: 标准的密钥格式，兼容性好
- **密钥导入**: 支持导入已有的 PEM 格式密钥
- **密钥导出**: 可复制密钥用于其他场景

### 2. 加密解密
- **公钥加密**: 使用公钥对数据进行加密
- **私钥解密**: 使用私钥对密文进行解密
- **Base64 编码**: 加密结果自动转换为 Base64 格式

### 3. 填充方案
| 方案 | 说明 | 安全性 | 兼容性 |
|------|------|--------|--------|
| **PKCS#1** | 经典填充方案 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **OAEP** | 最优非对称加密填充 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

### 4. 密钥长度对比

| 密钥长度 | 安全性 | 速度 | PKCS#1 最大数据 | OAEP 最大数据 | 推荐场景 |
|----------|--------|------|----------------|---------------|----------|
| **1024 bits** | ⭐⭐ | ⭐⭐⭐⭐⭐ | 117 字节 | 86 字节 | ❌ 不推荐 |
| **2048 bits** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 245 字节 | 214 字节 | ✅ 推荐 |
| **4096 bits** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | 501 字节 | 470 字节 | 🔒 高安全 |

## 使用步骤

### 方式一：生成新密钥对

1. **切换到"密钥管理"标签页**
   - 点击顶部的"密钥管理"标签

2. **选择密钥长度**
   - 1024 bits: ❌ 不推荐（安全性低）
   - 2048 bits: ✅ 推荐（平衡安全性和性能）
   - 4096 bits: 🔒 高安全（生成较慢）

3. **生成密钥对**
   - 点击"生成密钥对"按钮
   - 等待生成完成（4096 位可能需要几秒）
   - 公钥和私钥将自动显示

4. **保存密钥**
   - 点击"复制"按钮保存密钥
   - ⚠️ **私钥必须妥善保管，不要泄露！**

### 方式二：使用现有密钥

1. **切换到"加密/解密"标签页**

2. **输入密钥**
   - 在"公钥"框中粘贴 PEM 格式的公钥
   - 在"私钥"框中粘贴 PEM 格式的私钥（解密时需要）

3. **配置加密参数**
   - 字符编码：通常选择 UTF-8
   - 填充方案：推荐使用 OAEP

### 加密流程

1. **准备公钥**
   - 生成新密钥对，或
   - 导入已有的公钥

2. **输入要加密的内容**
   - 在"输入内容"框中输入明文
   - 注意数据大小限制（见上表）

3. **选择配置**
   - 字符编码：UTF-8
   - 填充方案：OAEP（推荐）

4. **执行加密**
   - 点击"公钥加密"按钮
   - 查看"输出结果"中的 Base64 密文

5. **复制结果**
   - 点击"复制结果"按钮
   - 或直接从输出框中复制

### 解密流程

1. **准备私钥**
   - 确保有对应的私钥
   - 在"私钥"框中输入 PEM 格式私钥

2. **输入密文**
   - 在"输入内容"框中粘贴 Base64 密文
   - 或使用"交换输入输出"按钮

3. **配置必须匹配**
   - 使用与加密时相同的填充方案
   - 字符编码保持一致

4. **执行解密**
   - 点击"私钥解密"按钮
   - 原始内容将显示在"输出结果"中

## 特色功能

### 1. 双标签设计
- **加密/解密标签**: 执行加密解密操作
- **密钥管理标签**: 生成和管理密钥对

### 2. 智能提示
- 数据大小限制警告
- 密钥长度安全性提示
- 私钥保管警告
- 详细的错误信息

### 3. 便捷操作
- **生成密钥对**: 一键生成标准 PEM 格式密钥
- **加载示例**: 快速体验工具功能
- **交换输入输出**: 方便连续操作
- **复制功能**: 一键复制密钥或结果
- **清空功能**: 快速清空所有输入

### 4. 实时反馈
- 字符计数显示
- 操作成功/失败提示
- 生成进度指示
- 密钥格式验证

## RSA 加密原理

### 非对称加密
RSA 使用一对密钥：
- **公钥（Public Key）**: 可以公开，用于加密数据
- **私钥（Private Key）**: 必须保密，用于解密数据

### 加密过程
```
明文 + 公钥 → 加密算法 → 密文
```

### 解密过程
```
密文 + 私钥 → 解密算法 → 明文
```

### 数学原理
基于大数分解的困难性：
- 将两个大质数相乘很容易
- 但将乘积分解回质数非常困难
- 这个数学难题保证了 RSA 的安全性

## 安全建议

### ✅ 推荐做法

1. **密钥长度**
   - 使用至少 2048 位密钥
   - 高安全场景使用 4096 位
   - 避免使用 1024 位密钥

2. **填充方案**
   - 优先使用 OAEP 填充
   - OAEP 比 PKCS#1 更安全

3. **私钥管理**
   - 私钥永远不要通过网络传输
   - 不要在前端代码中硬编码私钥
   - 使用密码保护私钥文件
   - 定期更换密钥对

4. **使用场景**
   - 小量数据加密（如密码、密钥）
   - 数字签名
   - 密钥交换

5. **大数据加密**
   - RSA 加密对称密钥（如 AES 密钥）
   - 使用 AES 加密实际数据
   - 这种混合加密方案兼顾安全和效率

### ❌ 避免的做法

1. **不要用 RSA 加密大量数据**
   - RSA 有数据大小限制
   - 加密大数据非常慢
   - 应使用混合加密方案

2. **不要重用密钥对**
   - 不同场景使用不同密钥对
   - 密钥泄露时立即更换

3. **不要忽略填充**
   - 不使用填充的 RSA 不安全
   - 必须使用标准填充方案

4. **不要公开私钥**
   - 私钥一旦泄露，所有加密数据都不安全
   - 私钥文件应设置严格的访问权限

## 实际应用场景

### 1. HTTPS/SSL/TLS
- 客户端用服务器公钥加密对称密钥
- 后续通信使用对称加密
- RSA 用于安全的密钥交换

### 2. 数字签名
- 用私钥对数据签名
- 其他人用公钥验证签名
- 确保数据来源和完整性

### 3. 邮件加密（PGP/GPG）
- 发送者用收件人公钥加密
- 收件人用自己私钥解密
- 保证邮件内容隐私

### 4. SSH 密钥认证
- 客户端生成密钥对
- 公钥放在服务器上
- 私钥用于身份验证

### 5. 软件授权
- 用私钥签名许可证
- 软件用公钥验证许可证
- 防止许可证伪造

### 6. 区块链和加密货币
- 私钥签名交易
- 公钥验证交易
- 私钥即数字资产所有权

## PEM 格式说明

### 公钥格式
```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...
（Base64 编码的密钥数据）
...
-----END PUBLIC KEY-----
```

### 私钥格式
```
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA...
（Base64 编码的密钥数据）
...
-----END RSA PRIVATE KEY-----
```

### 格式特点
- 文本格式，便于传输和存储
- Base64 编码，可以安全地复制粘贴
- 有明确的开始和结束标记
- 跨平台、跨语言兼容

## 常见问题

### Q: RSA 和 AES 有什么区别？
A: 
- **RSA**: 非对称加密，公钥加密、私钥解密，适合小量数据和密钥交换
- **AES**: 对称加密，同一密钥加密解密，速度快，适合大量数据

### Q: 为什么加密时提示"数据太大"？
A: RSA 有数据大小限制：
- 受密钥长度和填充方案限制
- 2048 位密钥最多加密 245 字节（PKCS#1）或 214 字节（OAEP）
- 建议使用 RSA 加密 AES 密钥，再用 AES 加密数据

### Q: 为什么解密失败？
A: 常见原因：
- 私钥不正确或不匹配
- 填充方案与加密时不一致
- 密文被篡改或格式错误
- Base64 解码失败

### Q: 生成密钥对需要多长时间？
A: 
- 1024 位: 瞬间完成
- 2048 位: 1-2 秒
- 4096 位: 3-10 秒（取决于设备性能）

### Q: 密钥可以重复使用吗？
A: 
- 技术上可以重复使用
- 但建议不同场景使用不同密钥对
- 定期更换密钥以提高安全性

### Q: 如何保管私钥？
A: 
- 存储在安全的地方（加密的密钥管理工具）
- 使用密码保护私钥文件
- 不要通过不安全的渠道传输
- 设置严格的文件访问权限
- 定期备份但不要备份到云端

### Q: 可以从公钥推算出私钥吗？
A: 
- 理论上不可行（基于大数分解的困难性）
- 2048 位密钥需要数千年才能破解（用现有技术）
- 4096 位密钥更加安全
- 量子计算机可能改变这一局面（需要使用后量子密码学）

## 技术实现

### 依赖库
- **node-forge**: 纯 JavaScript 的加密库
- 支持完整的 RSA 标准
- 可在浏览器中运行
- 无需后端支持

### 密钥生成
```typescript
forge.pki.rsa.generateKeyPair({ 
  bits: keySize,  // 1024, 2048, or 4096
  workers: -1     // 使用 Web Workers 加速
})
```

### 加密过程
```typescript
const pubKey = forge.pki.publicKeyFromPem(publicKeyPem);
const encrypted = pubKey.encrypt(plaintext, 'RSA-OAEP', {
  md: forge.md.sha256.create()
});
const base64Cipher = forge.util.encode64(encrypted);
```

### 解密过程
```typescript
const privKey = forge.pki.privateKeyFromPem(privateKeyPem);
const encryptedBytes = forge.util.decode64(base64Cipher);
const decrypted = privKey.decrypt(encryptedBytes, 'RSA-OAEP', {
  md: forge.md.sha256.create()
});
```

## 性能优化

### 1. 密钥缓存
- 生成的密钥保存在状态中
- 避免重复生成
- 需要时可清空

### 2. 异步生成
- 使用 Web Workers（如果可用）
- 避免阻塞 UI
- 大密钥生成时显示进度

### 3. 批量操作
- 如需加密多个数据，考虑：
  1. 生成一个 AES 密钥
  2. 用 RSA 加密 AES 密钥
  3. 用 AES 加密所有数据

## 更新日志

### v1.0.0 (当前版本)
- ✨ 支持 1024、2048、4096 位密钥生成
- ✨ 支持 PKCS#1 和 OAEP 填充方案
- ✨ 标准 PEM 格式密钥
- ✨ 公钥加密和私钥解密
- ✨ 密钥管理独立标签页
- ✨ Base64 编码输出
- ✨ 详细的使用说明和安全建议
- ✨ 字符计数和实时反馈
- ✨ 示例数据快速加载
- ✨ 响应式设计

## 总结

这是一个功能完整、专业级的 RSA 加密解密工具，适合：

- 🎓 **学习**: 理解 RSA 非对称加密原理
- 🧪 **测试**: 验证加密解密功能
- 🔧 **开发**: 快速生成测试用密钥对
- 🔐 **实用**: 小量敏感数据加密

**重要提醒**：
1. 私钥是数字世界的"钥匙"，必须妥善保管
2. 对于生产环境，建议在后端进行加密操作
3. 敏感数据的密钥管理应使用专业的密钥管理系统（KMS）
4. 定期更新密钥和关注安全最佳实践

**安全第一，便捷其次！** 🔒

